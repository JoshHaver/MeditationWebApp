(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{34:function(e,t,s){},60:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),c=s(28),o=s.n(c),a=(s(34),s(9)),r=function(e){return new Date(Number(e)).toDateString()},j=s(0),d=function(e){var t=e.sessions;return Object(j.jsx)("div",{className:"all-sessions",children:t.map((function(e){return Object(j.jsx)("div",{className:"all-sessions",children:Object(j.jsxs)(a.b,{to:"/meditation/sessions/".concat(e.SessionID),style:{textDecoration:"none"},children:[Object(j.jsx)("h2",{children:r(e.dateMilliseconds)}),e.sessionLength&&Object(j.jsxs)("p",{children:["Session Length: ",e.sessionLength]}),e.sessionRating&&Object(j.jsxs)("p",{children:["Session Rating: ",e.sessionRating]}),e.sleepLength&&Object(j.jsxs)("p",{children:["Sleep Length: ",e.sleepLength]}),e.moodRating&&Object(j.jsxs)("p",{children:["Mood Rating: ",e.moodRating]})]})},e.SessionID)}))})};function l(){return Object(j.jsx)("div",{className:"loading-screen",children:Object(j.jsx)("h2",{children:"Loading..."})})}var u=s(8),h=function(e){var t=Object(n.useState)(null),s=Object(u.a)(t,2),i=s[0],c=s[1],o=Object(n.useState)(!0),a=Object(u.a)(o,2),r=a[0],j=a[1],d=Object(n.useState)(null),l=Object(u.a)(d,2),h=l[0],b=l[1];return Object(n.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal}).then((function(e){return e.ok?e.json():(b("Res.ok returned false"),j(!1),Promise.reject(e))})).then((function(e){c(e),j(!1),b(null)})).catch((function(e){"AbortError"===e.name?console.log("Fetch aborted"):(b("Could not find the resource at the provided url"),j(!1))})),function(){return t.abort()}}),[e]),{data:i,isLoading:r,error:h}},b=function(){var e=h("https://joshhaver.com/meditation/api/v1/sessions"),t=e.data,s=e.isLoading,n=e.error;return Object(j.jsxs)("div",{className:"show-sessions",children:[s&&Object(j.jsx)("div",{className:"loading-screen",children:Object(j.jsx)(l,{})}),n&&Object(j.jsxs)("div",{children:[" ",n," "]}),t&&Object(j.jsx)(d,{sessions:t.Items})]})},O=function(){return Object(j.jsxs)("nav",{className:"navbar",children:[Object(j.jsx)("h1",{children:"Meditation Tracker"}),Object(j.jsxs)("div",{className:"links",children:[Object(j.jsx)("a",{href:"https://joshhaver.com",children:"Home"}),Object(j.jsx)(a.b,{to:"/meditation/sessions",children:"All Sessions"}),Object(j.jsx)(a.b,{to:"/meditation/create",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"New Session"})]})]})},x=s(11),p=s.n(x),m=s(14),g=s(2),v=s(13),f=s.n(v),S=function(){var e=Object(m.a)(p.a.mark((function e(t,s,n,i,c,o,a){var r,j,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Math.floor(1e10*Math.random()),j=Date.now(),d={},"post"===t?(d.SessionID=r,d.dateMilliseconds=j):(d.SessionID=o,d.dateMilliseconds=a),""!==s&&(d.sessionLength=s),""!==n&&(d.sessionRating=n),""!==i&&(d.sleepLength=i),""!==c&&(d.moodRating=c),console.log(d),e.prev=9,"post"!==t){e.next=15;break}return e.next=13,f.a.post("https://joshhaver.com/meditation/api/v1/create",d);case 13:e.next=17;break;case 15:return e.next=17,f.a.put("https://joshhaver.com/meditation/api/v1/sessions/"+o,d);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),console.log("Error sending put/post request");case 22:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t,s,n,i,c,o,a){return e.apply(this,arguments)}}();function L(e){var t=e.session,s=e.editMode,i=Object(n.useState)(""),c=Object(u.a)(i,2),o=c[0],a=c[1],r=Object(n.useState)(""),d=Object(u.a)(r,2),l=d[0],h=d[1],b=Object(n.useState)(""),O=Object(u.a)(b,2),x=O[0],v=O[1],f=Object(n.useState)(""),L=Object(u.a)(f,2),M=L[0],N=L[1],R=Object(g.f)(),k=function(){var e=Object(m.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!s){e.next=6;break}return e.next=4,S("put",o,l,x,M,t.SessionID,t.dateMilliseconds);case 4:e.next=8;break;case 6:return e.next=8,S("post",o,l,x,M);case 8:s?R.push("/meditation/sessions"):(a(""),h(""),v(""),N(""));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"create",children:[s&&Object(j.jsx)("h2",{children:"Edit Session"}),!s&&Object(j.jsx)("h2",{children:"Add a New Meditation Session"}),Object(j.jsxs)("form",{onSubmit:k,children:[Object(j.jsx)("label",{children:"Session Length in Minutes"}),Object(j.jsx)("input",{type:"number",required:!0,min:"0",placeholder:"e.g. 10",value:o,onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("label",{children:"Rate Your Session 1-5"}),Object(j.jsx)("input",{type:"number",min:"1",max:"5",placeholder:"e.g. 4",value:l,onChange:function(e){return h(e.target.value)}}),Object(j.jsx)("label",{children:"Hours Slept Last Night"}),Object(j.jsx)("input",{type:"number",min:"0",placeholder:"e.g. 8",value:x,onChange:function(e){return v(e.target.value)}}),Object(j.jsx)("label",{children:"Rate Your Mood 1-5"}),Object(j.jsx)("input",{type:"number",min:"1",max:"5",placeholder:"e.g. 5",value:M,onChange:function(e){return N(e.target.value)}}),s&&Object(j.jsx)("button",{children:"Update Session"}),!s&&Object(j.jsx)("button",{children:"Add Session"})]})]})}function M(){return Object(j.jsx)("div",{className:"not-found",children:Object(j.jsx)("h2",{children:"Page Not Found"})})}function N(e){var t=e.session,s=Object(g.f)(),i=Object(n.useState)(!1),c=Object(u.a)(i,2),o=c[0],a=c[1];return Object(j.jsxs)("div",{children:[!o&&Object(j.jsxs)("div",{className:"single-session",children:[Object(j.jsx)("h2",{children:r(t.dateMilliseconds)}),t.sessionLength&&Object(j.jsxs)("p",{children:["You Meditated for ",t.sessionLength," Minutes"]}),t.sessionRating&&Object(j.jsxs)("p",{children:["You Rated your session a ",t.sessionRating,"/5"]}),t.sleepLength&&Object(j.jsxs)("p",{children:["You Slept for ",t.sleepLength," Hours the Night Before"]}),t.moodRating&&Object(j.jsxs)("p",{children:["You Rated Your Mood a ",t.moodRating,"/5"]}),Object(j.jsx)("button",{onClick:function(){return a(!0)},children:"Edit"}),Object(j.jsx)("button",{onClick:function(){f.a.delete("https://joshhaver.com/meditation/api/v1/sessions/"+t.SessionID),s.push("/sessions")},children:"Delete"})]}),o&&Object(j.jsx)(L,{session:t,editMode:!0})]})}function R(){var e=Object(g.g)().id,t=h("https://joshhaver.com/meditation/api/v1/sessions/"+e),s=t.data,n=t.isLoading,i=t.error;return Object(j.jsxs)("div",{className:"session-details",children:[n&&Object(j.jsx)("div",{children:"Loading..."}),i&&Object(j.jsx)(M,{}),s&&Object(j.jsx)(N,{session:s.Item})]})}var k=function(){return Object(j.jsx)(a.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(O,{}),Object(j.jsx)("div",{className:"Sessions",children:Object(j.jsxs)(g.c,{children:[Object(j.jsx)(g.a,{exact:!0,path:"/meditation/sessions",children:Object(j.jsx)(b,{})}),Object(j.jsx)(g.a,{exact:!0,path:"/meditation/create",children:Object(j.jsx)(L,{editMode:!1})}),Object(j.jsx)(g.a,{exact:!0,path:"/meditation/sessions/:id",children:Object(j.jsx)(R,{})})]})})]})})};o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.39d0cc12.chunk.js.map