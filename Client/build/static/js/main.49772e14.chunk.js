(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{34:function(e,t,s){},60:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),i=s(28),r=s.n(i),o=(s(34),s(8)),a=function(e){return new Date(Number(e)).toDateString()},j=s(0),l=function(e){var t=e.sessions;return Object(j.jsx)("div",{className:"all-sessions",children:t.map((function(e){return Object(j.jsx)("div",{className:"all-sessions",children:Object(j.jsxs)(o.b,{to:"/sessions/".concat(e.SessionID),style:{textDecoration:"none"},children:[Object(j.jsx)("h2",{children:a(e.dateMilliseconds)}),e.sessionLength&&Object(j.jsxs)("p",{children:["Session Length: ",e.sessionLength]}),e.sessionRating&&Object(j.jsxs)("p",{children:["Session Rating: ",e.sessionRating]}),e.sleepLength&&Object(j.jsxs)("p",{children:["Sleep Length: ",e.sleepLength]}),e.moodRating&&Object(j.jsxs)("p",{children:["Mood Rating: ",e.moodRating]})]})},e.SessionID)}))})};function d(){return Object(j.jsx)("div",{className:"loading-screen",children:Object(j.jsx)("h2",{children:"Loading..."})})}var u=s(9),h=function(e){var t=Object(n.useState)(null),s=Object(u.a)(t,2),c=s[0],i=s[1],r=Object(n.useState)(!0),o=Object(u.a)(r,2),a=o[0],j=o[1],l=Object(n.useState)(null),d=Object(u.a)(l,2),h=d[0],b=d[1];return Object(n.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal}).then((function(e){return e.ok?e.json():(b("Res.ok returned false"),j(!1),Promise.reject(e))})).then((function(e){i(e),j(!1),b(null)})).catch((function(e){"AbortError"===e.name?console.log("Fetch aborted"):(b("Could not find the resource at the provided url"),j(!1))})),function(){return t.abort()}}),[e]),{data:c,isLoading:a,error:h}},b=function(){var e=h("https://joshhaver.com/api/v1/sessions"),t=e.data,s=e.isLoading,n=e.error;return Object(j.jsxs)("div",{className:"show-sessions",children:[s&&Object(j.jsx)("div",{className:"loading-screen",children:Object(j.jsx)(d,{})}),n&&Object(j.jsxs)("div",{children:[" ",n," "]}),t&&Object(j.jsx)(l,{sessions:t.Items})]})},O=function(){return Object(j.jsxs)("nav",{className:"navbar",children:[Object(j.jsx)("h1",{children:"Meditation Tracker"}),Object(j.jsxs)("div",{className:"links",children:[Object(j.jsx)(o.b,{to:"/",children:"Home"}),Object(j.jsx)(o.b,{to:"/sessions",children:"All Sessions"}),Object(j.jsx)(o.b,{to:"/create",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"New Session"})]})]})},x=s(11),p=s.n(x),g=s(14),v=s(2),f=s(13),m=s.n(f),S=function(){var e=Object(g.a)(p.a.mark((function e(t,s,n,c,i,r,o){var a,j,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Math.floor(1e10*Math.random()),j=Date.now(),l={},"post"===t?(l.SessionID=a,l.dateMilliseconds=j):(l.SessionID=r,l.dateMilliseconds=o),""!==s&&(l.sessionLength=s),""!==n&&(l.sessionRating=n),""!==c&&(l.sleepLength=c),""!==i&&(l.moodRating=i),console.log(l),e.prev=9,"post"!==t){e.next=15;break}return e.next=13,m.a.post("https://joshhaver.com/api/v1/create",l);case 13:e.next=17;break;case 15:return e.next=17,m.a.put("https://joshhaver.com/api/v1/sessions/"+r,l);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),console.log("Error sending put/post request");case 22:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t,s,n,c,i,r,o){return e.apply(this,arguments)}}();function N(e){var t=e.session,s=e.editMode,c=Object(n.useState)(""),i=Object(u.a)(c,2),r=i[0],o=i[1],a=Object(n.useState)(""),l=Object(u.a)(a,2),d=l[0],h=l[1],b=Object(n.useState)(""),O=Object(u.a)(b,2),x=O[0],f=O[1],m=Object(n.useState)(""),N=Object(u.a)(m,2),k=N[0],L=N[1],M=Object(v.f)(),R=function(){var e=Object(g.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!s){e.next=6;break}return e.next=4,S("put",r,d,x,k,t.SessionID,t.dateMilliseconds);case 4:e.next=8;break;case 6:return e.next=8,S("post",r,d,x,k);case 8:s?M.push("/sessions"):(o(""),h(""),f(""),L(""));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"create",children:[s&&Object(j.jsx)("h2",{children:"Edit Session"}),!s&&Object(j.jsx)("h2",{children:"Add a New Meditation Session"}),Object(j.jsxs)("form",{onSubmit:R,children:[Object(j.jsx)("label",{children:"Session Length in Minutes"}),Object(j.jsx)("input",{type:"number",required:!0,min:"0",placeholder:"e.g. 10",value:r,onChange:function(e){return o(e.target.value)}}),Object(j.jsx)("label",{children:"Rate Your Session 1-5"}),Object(j.jsx)("input",{type:"number",min:"1",max:"5",placeholder:"e.g. 4",value:d,onChange:function(e){return h(e.target.value)}}),Object(j.jsx)("label",{children:"Hours Slept Last Night"}),Object(j.jsx)("input",{type:"number",min:"0",placeholder:"e.g. 8",value:x,onChange:function(e){return f(e.target.value)}}),Object(j.jsx)("label",{children:"Rate Your Mood 1-5"}),Object(j.jsx)("input",{type:"number",min:"1",max:"5",placeholder:"e.g. 5",value:k,onChange:function(e){return L(e.target.value)}}),s&&Object(j.jsx)("button",{children:"Update Session"}),!s&&Object(j.jsx)("button",{children:"Add Session"})]})]})}function k(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Welcome to my meditation tracking app!"}),Object(j.jsx)("h4",{children:"Front end written with react.js"}),Object(j.jsx)("h4",{children:"Back end written with Node.js/express.js and hosted on AWS elastic beanstalk"})]})}function L(){return Object(j.jsx)("div",{className:"not-found",children:Object(j.jsx)("h2",{children:"Page Not Found"})})}function M(e){var t=e.session,s=Object(v.f)(),c=Object(n.useState)(!1),i=Object(u.a)(c,2),r=i[0],o=i[1];return Object(j.jsxs)("div",{children:[!r&&Object(j.jsxs)("div",{className:"single-session",children:[Object(j.jsx)("h2",{children:a(t.dateMilliseconds)}),t.sessionLength&&Object(j.jsxs)("p",{children:["You Meditated for ",t.sessionLength," Minutes"]}),t.sessionRating&&Object(j.jsxs)("p",{children:["You Rated your session a ",t.sessionRating,"/5"]}),t.sleepLength&&Object(j.jsxs)("p",{children:["You Slept for ",t.sleepLength," Hours the Night Before"]}),t.moodRating&&Object(j.jsxs)("p",{children:["You Rated Your Mood a ",t.moodRating,"/5"]}),Object(j.jsx)("button",{onClick:function(){return o(!0)},children:"Edit"}),Object(j.jsx)("button",{onClick:function(){m.a.delete("https://joshhaver.com/api/v1/sessions/"+t.SessionID),s.push("/sessions")},children:"Delete"})]}),r&&Object(j.jsx)(N,{session:t,editMode:!0})]})}function R(){var e=Object(v.g)().id,t=h("https://joshhaver.com/api/v1/sessions/"+e),s=t.data,n=t.isLoading,c=t.error;return Object(j.jsxs)("div",{className:"session-details",children:[n&&Object(j.jsx)("div",{children:"Loading..."}),c&&Object(j.jsx)(L,{}),s&&Object(j.jsx)(M,{session:s.Item})]})}var w=function(){return Object(j.jsx)(o.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(O,{}),Object(j.jsx)("div",{className:"Sessions",children:Object(j.jsxs)(v.c,{children:[Object(j.jsx)(v.a,{exact:!0,path:"/",children:Object(j.jsx)(k,{})}),Object(j.jsx)(v.a,{exact:!0,path:"/sessions",children:Object(j.jsx)(b,{})}),Object(j.jsx)(v.a,{exact:!0,path:"/create",children:Object(j.jsx)(N,{editMode:!1})}),Object(j.jsx)(v.a,{exact:!0,path:"/sessions/:id",children:Object(j.jsx)(R,{})})]})})]})})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.49772e14.chunk.js.map